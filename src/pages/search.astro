---
import PageLayout from "@/layouts/PageLayout.astro";
import PageDescription from "@/components/segments/PageDescription.astro";
import SearchBar from "@/components/segments/Search";
import { optimizePostImages, getUnsortedPosts } from "@/util/posts-utils";
import type { PostFrontmatter } from "@/types/Posts";

// retrieves all posts that are not drafts
const posts = await getUnsortedPosts();

const postsToSearch: PostFrontmatter[] = await optimizePostImages(posts);
---

<PageLayout>
  <PageDescription categoriesPath={["search"]} 
                   pageName="Buscar" 
                   description="Busque por qualquer coisa..." />

  <div class="pt-5 flex flex-col items-center">
    <SearchBar elementsToSearch={postsToSearch} client:load />
  </div>
</PageLayout>


---
export interface Props {
  url: string;
  penName: string;
  defaultTab: "html" | "css" | "js";
}

const { url, penName, defaultTab = "html" } = Astro.props;

if (!url.startsWith("https://codepen.io"))
  throw new Error("Invalid codepen url");

const urlItems = url.replace("https://", "").split("/");

const user = urlItems[1];
const slug = urlItems[3];
---

<p
  class="codepen mb-1"
  data-height="300"
  data-default-tab={`${defaultTab},result`}
  data-slug-hash={slug}
  data-preview="true"
  data-user={user}
  style="height: 300px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;"
>
  <span
    >See the Pen <a href={url}>{" " + penName}</a>{` by ${user} `}(<a
      href={`https://codepen.io/${user}`}>{"@" + user}</a
    >) on <a href="https://codepen.io">CodePen</a>.</span
  >
</p>
<script async src="https://cpwebassets.codepen.io/assets/embed/ei.js"></script>
